(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(2518)}])},2518:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return g}});var t=i(5893);function r(){return(0,t.jsx)("footer",{className:"footer"})}function s(){return(0,t.jsx)("header",{className:"header"})}var a=i(9008),l=i.n(a),o=i(1265);let c=(0,o.Z)({palette:{primary:{main:"#73D2E6"},secondary:{main:"#D18AE6"},error:{main:"#e5da76"},warning:{main:"#E6D85C"},info:{main:"#7697e5"},success:{main:"#94dd4b"},contrastThreshold:3,tonalOffset:.2}});var d={theme:c},h=i(1927);let u={lang:"ja",keywords:[],title:"",type:"article",noindex:!1};function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=e.description,i=e.noindex?"noindex":"index, follow";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{children:[(0,t.jsx)("meta",{charSet:"utf-8"}),(0,t.jsx)("meta",{name:"robots",content:"".concat(i)}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"}),(0,t.jsx)("title",{children:e.title}),(0,t.jsx)("meta",{name:"description",content:n}),(0,t.jsx)("meta",{name:"keywords",content:e.keywords?e.keywords.join(", "):""}),(0,t.jsx)("link",{rel:"icon",href:"favicon.ico"}),(0,t.jsx)("link",{rel:"manifest",href:"manifest.json"})]}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(h.Z,{theme:d.theme,children:[e.background?(0,t.jsx)("div",{className:"background",children:e.background}):null,(0,t.jsxs)("div",{className:"foreground",children:[(0,t.jsx)(s,{}),(0,t.jsx)("main",{role:"main",className:"main",children:e.children}),(0,t.jsx)(r,{})]})]})})]})}var m=i(7294),j=i(7293);function f(){let[e,n,i]=function(){let[e,n]=(0,m.useState)(null),[i,t]=(0,m.useState)(!1),r=()=>e?e.prompt():Promise.reject(Error('Tried installing before browser sent "beforeinstallprompt" event'));return(0,m.useEffect)(()=>{let e=e=>{e.preventDefault(),n(e)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),(0,m.useEffect)(()=>{let e=()=>{t(!0)};return window.addEventListener("appinstalled",e),()=>{window.removeEventListener("appinstalled",e)}},[]),[e,r,i]}();return e&&!i?(0,t.jsx)(j.Z,{variant:"contained",color:"info",onClick:n,children:"インストール"}):null}var w={isReactNative:function(){return window.ReactNativeWebView&&void 0!==window.ReactNativeWebView&&null!==window.ReactNativeWebView}},v={isDisplayModeStandalone:function(){return window.matchMedia("(display-mode: standalone)").matches}};function p(){let[e,n]=(0,m.useState)(null);return(0,m.useEffect)(()=>{if("undefined"!=typeof Notification){let e=Notification.permission;if(n(e),"granted"===e){let e=()=>{new Notification("next-pwa-exampleの通知テスト",{body:"10秒に一回通知してます。拒否するまで止まりません。"})};setTimeout(e,1e4)}}},[]),(0,t.jsx)(t.Fragment,{children:null===e?(0,t.jsx)("span",{style:{color:"red"},children:"Web通知非対応"}):"granted"===e?(0,t.jsx)("span",{style:{color:"green"},children:"承認済み"}):(0,t.jsx)("span",{children:(0,t.jsx)(j.Z,{variant:"contained",color:"info",onClick:()=>{Notification.requestPermission().then(e=>{"granted"===e&&n(e)})},children:"通知の承認"})})})}function g(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(x,{title:"test",children:[(0,t.jsx)("h1",{children:"Next.jsとPWAのサンプルサイト"}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{children:"インストールボタン"}),(0,t.jsx)("div",{style:{margin:"16px auto"},children:(0,t.jsx)(f,{})}),(0,t.jsx)("div",{children:(0,t.jsx)("small",{children:"※インストール可能な場合、上にボタンが表示されます。"})}),(0,t.jsx)("div",{children:(0,t.jsx)("small",{children:"※iOS および iPadOS の Chrome と Edge は PWA のインストールをサポートしていないため表示されない"})})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{children:"PWA判定"}),v.isDisplayModeStandalone()?(0,t.jsx)("div",{style:{color:"green"},children:"現在、スタンドアローン(PWA)モード"}):(0,t.jsx)("div",{style:{color:"orange"},children:"現在、スタンドアローン（PWA）以外のモード"}),(0,t.jsx)("div",{children:"※PWAで動いてる場合、スタンドアローンモードで表示される設定にしている"})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{children:"React Native WebView判定"}),w.isReactNative()?(0,t.jsx)("div",{style:{color:"green"},children:"現在、React Native WebViewモード"}):(0,t.jsx)("div",{style:{color:"orange"},children:"現在、通常のWebモード"})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{children:"通知の承認"}),(0,t.jsx)("div",{style:{margin:"16px auto"},children:(0,t.jsx)(p,{})})]})]})})}}},function(e){e.O(0,[583,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);